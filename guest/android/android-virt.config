# Config fragment for upstream 6.6 LTS with Android features on QEMU virt
# Applied on top of arm64 defconfig via scripts/config

# Virtio (built-in, not modules â€” our hypervisor loads kernel directly)
CONFIG_VIRTIO=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_NET=y
CONFIG_VIRTIO_CONSOLE=y

# Block device + filesystem
CONFIG_BLK_DEV=y
CONFIG_EXT4_FS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# Initramfs support
CONFIG_BLK_DEV_INITRD=y
CONFIG_RD_GZIP=y

# Serial console (PL011)
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y

# Basic kernel options
CONFIG_PRINTK=y
CONFIG_SMP=y
CONFIG_NR_CPUS=8

# Android-specific (available in upstream 6.6, needed for later phases)
CONFIG_ANDROID=y
CONFIG_ANDROID_BINDER_IPC=y
CONFIG_ANDROID_BINDERFS=y

# Disable BTF (reduces build deps and image size)
CONFIG_DEBUG_INFO_BTF=n
